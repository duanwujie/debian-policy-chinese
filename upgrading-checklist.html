<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
 <!--                             -*- Mode: Sgml -*- 
    upgrading-checklist.html
    Author           : Manoj Srivastava ( srivasta@tiamat.datasync.com ) 
    Created On       : Thu Oct 29 20:54:48 1998
    Created On Node  : tiamat.datasync.com
    Last Modified By : Julian Gilbey
    Last Modified On : Mon Jun 19 20:06:50 2000
    Last Machine Used: polya.maths.qmw.ac.uk
    Update Count     : 11
    Status           : Unknown, Use with caution!
    HISTORY          : 
    Description      : 

    -->


    <title>Policy checklist for upgrading your packages</title>
  </head>
  <body>

    <h1>Policy checklist for upgrading your packages</h1>

    <h2>About the checklist</h2>

<p>
The checklist below has been created to simplify the upgrading process
of old packages. Note, that this list is not `official.' If you have
doubts about a certain topic, if you need more details, or if you
think some other package does not comply with policy, please refer to
the Policy Manual.
</p>

<p>
Here is how the check list works: Check out which policy version your
packages complies with currently. Than move upwards until the top and
check which of the items on the list might concern your package. If an
item does not give you enough details, please check out the Policy
Manual.
</p>

<h2>The checklist</h2>

<pre>
3.2.1.0                    Aug 00

  Policy Manual:
     - A package of priority standard or hihger may provide two
       binaries, one compiled with support for the X Window System,
       and the other without.
     -

3.2.0.0                    Aug 00

  Policy Manual:
     - By default executables should not be built with the debugging
       option -g. Instead, it is recommended to support building the
       package with debugging information optionally.
     - Policy for packages where the upstream uses html changelog
       files has been expanded. In short, a plain text changelog file
       should always be generated for the upstream changes.
     - Please note that the new release of the X window system (4.x)
       shall probably need sweeping changes in policy.
     - Policy for packages providing an X server has been codified
       (formalizes existing practice - use virtual package xserver)
     - Policy for packages providing an X terminal emulator has been
       codified (use virtual package x-terminal-emulator)
     - Policy for packages providing an X window manager has been
       codified (use virtual package x-window-anager, and also as an
       alternative for /usr/bin/x-window-manager. The policy has
       guidelines on how to calculate priority)
     - Policy for packages providing an X fonts has been
       codified. Please look into the manual for details; this section
       has been written from scratch.
     - Policy for packages using the X Window System and FHS issues
       has been clarified. Please read the manual for details.
     - Policy for packages providing an X application default has been
       clarified. 
     - No package may contain or make hard links to conffiles.

  Packaging Manual:
     - Noted that newer dpkg versions do not require extreme care in
       always creating theshared lib before the symlink, so the unpack
       order be correct. 

3.1.1.0                    Nov 99

  Packaging Manual:
     - Correction to semantics of architecture lists in Build-Depends
      etc.  Should not affect many packages.

3.1.0.0                    Oct 99

  Policy Manual:
     - /usr/doc/&lt;package&gt; has to be a symlink pointing to
       /usr/share/doc/&lt;package&gt;.  This symlink has to be
       maintained by postinst and prerm, because dpkg will cause
       problems otherwise.  Create/remote the symlinks using debhelper
       or see section "6.4. Accessing the documentation" for more
       information.
     - Introduced source dependencies.  (Whereas this ought to demand a
       major policy number rise, we've only just had one of them, so
       I'm going to use a minor number instead.)
     - /etc/rc.boot has been deprecated in favour of /etc/rcS.d.
       Packages should not be touching this directory, anyway, but
       should use update-rc.d instead.
     - update-rc.d is now the *only* allowable way of accessing the
       /etc/rc?.d/[SK]??* links.  Any scripts which manipulate them
       directly must be changed to use update-rc.d instead.  (This is
       because the file-rc package handles this information in an
       incompatible way.)
     - Compiled examples go in /usr/lib/&lt;package&gt;/examples with
       symlinks from /usr/share/doc/&lt;package&gt;/examples/* or from
       /usr/share/doc/&lt;package&gt;/examples itself.
     - Updated FHS to a 2.1 draft; this reverts /var/state to
      /var/lib.
     - Added MIME sub-policy document.
     - VISUAL is allowed as a (higher priority) alternative to EDITOR.
     - Modified liblockfile description, which affects
       mailbox-accessing programs.  Please see the policy document for
       details.
     - If a package provides a changelog in HTML format, a text-only
       version should also be included.  Such a version may be prepared
       using lynx -dump -nolist.)

  Packaging Manual:
     - Description of how to handle version numbers based on dates
       added: see section 5.1.


3.0.1.0                    Jul 99

  Policy Manual:
    -  Added the clarification that the .la files are essential for the
       packages using libtool's libltdl library, in which case the
       .la files must go in the run-time library package.


3.0.0.0                    Jun 99

  Policy Manual:
    - Debian formally moves from the FSSTND to the FHS. This is a
      major change, and the implications of this move are probably
      not all known.
    - Only 3 digits of the Standards version need be included in
      control files, though all four digits are still permitted. 
    - The location of the GPL has changed to
      /usr/share/common-licenses. This may require changing the
      copyright files to point to the correct location of the GPL and
      other major licences
    - Packages that use libtool to create shared libraries must
      include the .la files in the -dev packages.
    - Use logrotate to rotate log files
    - section 5.8 has been rewritten (Programs for the X Window
      System) 
    - There is now anassi=ociated menu policy, in a separate document,
      that carries the full weight of Debian policy. 
    - The files `/var/run/utmp', `/var/log/wtmp' and
      `/var/log/lastlog' must be installed writeable by group
      utmp. Programs who need to modify those files must be installed
      install setgid utmp.


2.5.0.0                         Oct 98

  Policy Manual:
    - Rearranged the manual to create a new Section 4, Files
      + Section 3.3 ("Files") was moved to Section 4. The Sections
        that  were Section 4 and Section 5 were  moved down to become
        Section 5 and Section 6.
      + What was Section 5.5 ("Log files") is now a subsection of the
        new Section 4 ("Files"), becoming section 4.8, placed after
        "Configuration files", moving the Section 4.8 ("Permissions
        and owners") to Section 4.9.  All subsections of the old
        Section 5 after 5.5  were moved down to fill in the number
        gap. 
    - Modified the section about changelog files to accomodate
      upstream changelogs which were formatted as HTML/ These
      upstream chagelog files should now be accessible as
      /usr/doc/package/changelog.html.gz 
      + Symlinks are permissible to link the real, or upstream,
        changelog name to the Debian mandated name.
    - Clarified that HTML documentation should be present in some
      package, though not necessarily the main binary package.
    - Corrected all references to the location of the copyright
      files. The correct location is /usr/doc/package/copyright
    - Ratified the architecture specification strings to cater to the
      HURD. 

2.4.1.0                         Apr 98

  Policy Manual:
    - Updated section 3.3.5 Symbolic links:
      + symbolic links within a toplevel directory should be relative,
        symbolic links between toplevel directories should be absolute
        (cf., Policy Weekly Issue#6, topic 2)

    - Updated section 4.9 Games:
      + manpages for games should be installed in /usr/man/man6
        (cf., Policy Weekly Issue#6, topic 3)

  Packaging Manual:
    - Updated prefix of chapter 12, Shared Libraries:
      ldconfig must be called in the postinst script if the package
      installs shared libraries
      (cf., Policy Weekly Issue #6, fixes:bug#20515)
  
2.4.0.0                         Jan 98

    - Updated section 3.3.4 Scripts:
      + /bin/sh may be any POSIX compatible shell
      + scripts including bashisms have to specify /bin/bash as
        interpreter
      + scripts which create files in world-writable directories
        (e.g., in /tmp) should use tempfile or mktemp for creating
        the directory

    - Updated section 3.3.5 Symbolic Links:
      + symbolic links referencing compressed files must have the same
        file extension as the referenced file

    - Updated section 3.3.6 Device files:
      + /dev/tty* serial devices should be used instead of /dev/cu*

    - Updated section 3.4.2 Writing the scripts [in /etc/init.d]:
      + all /etc/init.d scripts have to provide the following options:
        start, stop, restart, force-reload
      + the reload option is optional and must never stop and restart
        the service

    - Updated section 3.5 Cron jobs:
      + cron jobs that need to be executed more often than daily should
        be installed into /etc/cron.d

    - Updated section 3.7 Menus:
      + removed section about how to register HTML docs to `menu'
        (the corresponding section in 4.4, Web servers and applications,
        has been removed in policy 2.2.0.0 already, so this one was
        obsolete)

    - New section 3.8 Keyboard configuration:
      + details about how the backspace and delete keys should be
        handled

    - New section 3.9 Environment variables:
      + no program must depend on environment variables to get a
        reasonable default configuration

    - New section 4.6 News system configuration:
      + /etc/news/organization and /etc/news/server should be supported
        by all news servers and clients

    - Updated section 4.7 Programs for the X Windows system:
      + programs requiring a non-free Motif library should be provided
        as foo-smotif and foo-dmotif package
      + if lesstif works reliably for such program, it should be linked
        against lesstif and not against a non-free Motif library

    - Updated section 4.9 Games:
      + games for X Windows have to be installed in /usr/games, just as
        non-X games

2.3.0.1, 2.3.0.0		Sep 97

	* new section `4.2 Daemons' including rules for
	  /etc/services, /etc/protocols, /etc/rpc, and /etc/inetd.conf

	* updated section about `Configuration files':
	  packages may not touch other packages' configuration files  

	* MUAs and MTAs have to use liblockfile

2.2.0.0				Jul 97

	* added section 4.1 `Architecture specification strings':
          use
	       &lt;arch&gt;-linux 
          where &lt;arch&gt; is one of the following:
               i386, alpha, arm, m68k, powerpc, sparc.

	* detailed rules for /usr/local

	* user ID's

	* editor/pager policy

	* cron jobs

	* device files

	* don't install shared libraries as executable

	* app-defaults files may not be conffiles

2.1.3.2, 2.1.3.1, 2.1.3.0	Mar 97

	* two programs with different functionality must not have the
	  same name

	* "Webstandard 3.0"

	* "Standard for Console Messages"

	* Libraries should be compiled with `-D_REENTRANT'

	* Libraries should be stripped with "strip --strip-unneeded"

2.1.2.2, 2.1.2.1, 2.1.2.0	Nov 96

	* Some changes WRT shared libraries

2.1.1.0				Sep 96

	* No hard links in source packages
	
	* Do not use dpkg-divert or update-alternatives without consultation

	* Shared libraries must be installed stripped

2.1.0.0				Aug 96

	* Upstream changelog must be installed too
</pre>

    <hr>

  </body>
</html>










<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-indent-data: t
sgml-live-element-indicator: t
sgml-set-face: t
End:
-->
